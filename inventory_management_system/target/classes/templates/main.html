<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="common::commontHead">
</head>
<body class="nav-md footer_fixed" data-genuitec-lp-enabled="false" data-genuitec-file-id="wc1-18">
<div class="container body" data-genuitec-lp-enabled="false" data-genuitec-file-id="wc1-18">
    <div class="main_container">
        <div th:replace="common::commonMenu"></div>
        <div th:replace="common::commonTop"></div>
        <div class="right_col" role="main">
            <div class="">
                <!-- top tiles -->
                <div class="row tile_count">
                    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                        <span class="count_top"><i class="fa fa-line-chart"></i>近一天销售额</span>
                        <div class="count">[[${mapOfUse['oneDaySales']}]]</div>
                        <span class="count_bottom"><i
                                class="green">[[${mapOfUse['oneDayThanYesterday']}]]% </i> 较昨天</span>
                    </div>
                    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                        <span class="count_top"><i class="fa fa-bar-chart"></i>近一周销售额</span>
                        <div class="count">[[${mapOfUse['sevenDaySales']}]]</div>
                        <span class="count_bottom"><i
                                class="green">[[${mapOfUse['sevenDayThanYesterday']}]]% </i>较上上周</span>
                    </div>
                    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                        <span class="count_top"><i class="fa fa-users"></i>客户数量</span>
                        <div class="count">[[${mapOfUse['customerSize']}]]</div>
                    </div>
                    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                        <span class="count_top"><i class="fa fa-user"></i>供应商数量</span>
                        <div class="count">[[${mapOfUse['supplierSize']}]]</div>
                    </div>
                    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                        <span class="count_top"><i class="fa fa-building"></i>物料种类</span>
                        <div class="count">[[${mapOfUse['materialSize']}]]</div>
                    </div>
                    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
                        <span class="count_top"><i class="fa fa-calculator"></i>商品种类</span>
                        <div class="count">[[${mapOfUse['productSize']}]]</div>
                    </div>
                </div>
                <!-- /top tiles -->

                <br/>

                <div class="row">


                    <div class="col-md-4 col-sm-4 col-xs-12">
                        <div class="x_panel tile fixed_height_320 overflow_hidden">
                            <div class="x_title">
                                <h2>近7天内物料使用分布</h2>
                                <ul class="nav navbar-right panel_toolbox">
                                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                    </li>
                                    </li>
                                </ul>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <table class="" style="width:100%">
                                    <tr>
                                        <th style="width:37%;">
                                            <p>Top 5</p>
                                        </th>
                                        <th>
                                            <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7">
                                                <p class="">物料</p>
                                            </div>
                                            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                                                <p class="">占比</p>
                                            </div>
                                        </th>
                                    </tr>
                                    <tr>
                                        <td>
                                            <canvas id="canvas1" height="140" width="140"
                                                    style="margin: 15px 10px 10px 0"></canvas>
                                        </td>
                                        <td>
                                            <table class="tile_info">
                                                <tr>
                                                    <td>
                                                        <p class="blueName"><i class="fa fa-square blue"></i>[[${mapOfUse['blueName']}]]
                                                        </p>
                                                    </td>
                                                    <td class="bluePercent" th:attr="v=${mapOfUse['bluePercent']}">
                                                        [[${mapOfUse['bluePercent']}]]%
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <p class="greenName"><i class="fa fa-square green"></i>[[${mapOfUse['greenName']}]]
                                                        </p>
                                                    </td>
                                                    <td class="greenPercent" th:attr="v=${mapOfUse['greenPercent']}">
                                                        [[${mapOfUse['greenPercent']}]]%
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <p class="purpleName"><i class="fa fa-square purple"></i>[[${mapOfUse['purpleName']}]]
                                                        </p>
                                                    </td>
                                                    <td class="purplePercent" th:attr="v=${mapOfUse['purplePercent']}">
                                                        [[${mapOfUse['purplePercent']}]]%
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <p class="aeroName"><i class="fa fa-square aero"></i>[[${mapOfUse['aeroName']}]]
                                                        </p>
                                                    </td>
                                                    <td class="aeroPercent" th:attr="v=${mapOfUse['aeroPercent']}">
                                                        [[${mapOfUse['aeroPercent']}]]%
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <p class="Others"><i class="fa fa-square red"></i>Others </p>
                                                    </td>
                                                    <td class="OthersPercent" th:attr="v=${mapOfUse['OthersPercent']}">
                                                        [[${mapOfUse['OthersPercent']}]]%
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 col-sm-6 col-xs-12">
                        <div class="x_panel fixed_height_320">
                            <div class="x_title">
                                <h2>近7天商品销售分布<small>top5</small></h2>
                                <ul class="nav navbar-right panel_toolbox">
                                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                    </li>
                                </ul>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <canvas id="pieChart" height="200px"></canvas>
                            </div>
                        </div>
                    </div>


                    <div class="col-md-4 col-sm-4 col-xs-12">
                        <div class="x_panel tile fixed_height_320">
                            <div class="x_title">
                                <h2>快捷菜单</h2>
                                <ul class="nav navbar-right panel_toolbox">
                                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                    </li>
                                    </li>
                                </ul>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <div class="dashboard-widget-content">
                                    <ul class="quick-list">
                                        <li><i class="fa fa-plus"></i><a
                                                href="/addPInOutRepositoryOne.html">新增商品出入库单据</a>
                                        </li>
                                        <li><i class="fa fa-plus"></i><a
                                                href="/addMInOutRepositoryOne.html">新增物料出入库单据</a>
                                        </li>
                                        <li><i class="fa fa-ellipsis-h"></i><a href="/managePInOutRepository.html">查看商品单据</a>
                                        </li>
                                        <li><i class="fa fa-ellipsis-h"></i><a href="/manageMInOutRepository.html">查看物料单据</a>
                                        </li>
                                        <li><i class="fa fa-mail-forward"></i><a href="/manageProduct.html">查看商品</a>
                                        </li>
                                        <li><i class="fa fa-mail-forward"></i><a href="/manageMaterial.html">查看物料</a>
                                        </li>
                                        <li><i class="fa fa-sign-out"></i><a href="/logOut.html">退出登录</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="row">
                    <div class="col-md-4 col-sm-4 col-xs-12">
                        <div class="x_panel">
                            <div class="x_title">
                                <h2>库存预警</h2>
                                <ul class="nav navbar-right panel_toolbox">
                                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                    </li>
                                    </li>
                                </ul>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <div class="dashboard-widget-content">
                                    <ul class="list-unstyled timeline widget">
                                        <li th:each=" m : ${materialList}">
                                            <div class="block">
                                                <div class="block_content">
                                                    <h2 class="title">
                                                        <a>物料编号:&nbsp;&nbsp;[[${m.pid}]]</a>
                                                    </h2>
                                                    <div class="byline">
                                                    </div>
                                                    <p class="excerpt">物料名称:&nbsp;&nbsp;[[${m.name}]]<br/>
                                                        可用数量:&nbsp;&nbsp;[[${m.available_quantity}]]<br>
                                                        最低库存:&nbsp;&nbsp;[[${m.minimum_stock}]]
                                                    </p>
                                                </div>
                                            </div>
                                        </li>
                                        <li th:each=" p : ${productList}">
                                            <div class="block">
                                                <div class="block_content">
                                                    <h2 class="title">
                                                        <a>商品编号:&nbsp;&nbsp;[[${p.pid}]]</a>
                                                    </h2>
                                                    <div class="byline">
                                                    </div>
                                                    <p class="excerpt">商品名称:&nbsp;&nbsp;[[${p.name}]]<br/>
                                                        可用数量:&nbsp;&nbsp;[[${p.available_quantity}]]<br>
                                                        最低库存:&nbsp;&nbsp;[[${p.minimum_stock}]]
                                                    </p>
                                                </div>
                                            </div>
                                        </li>

                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-8 col-sm-8 col-xs-12">

                        <div class="row">
                            <!-- Start to do list -->
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div class="x_panel">
                                    <div class="x_title">
                                        <h2>最近7天商品销量<small>top10</small></h2>
                                        <ul class="nav navbar-right panel_toolbox">
                                            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                            </li>
                                            </li>
                                        </ul>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div class="">
                                            <ul class="to_do">
                                                <li th:each=" pp :${productListOfTop}">
                                                    <p>编号：[[${pp.pid}]] &nbsp;&nbsp;&nbsp;昵称：[[${pp.name}]]</p>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End to do list -->
                        </div>
                    </div>
                </div>
                <br><br><br><br>
            </div>
        </div>
        <div th:replace="common::commonFooter"></div>
    </div>
</div>
<div th:replace="common::commonJs"></div>
<input type="hidden" name="blue" th:attr="n=${mapOfUse['BlueName']}">
<input type="hidden" name="blueV" th:value="${mapOfUse['BlueV']}">
<input type="hidden" name="green" th:attr="n=${mapOfUse['GreenName']}">
<input type="hidden" name="greenV" th:value="${mapOfUse['GreenV']}">
<input type="hidden" name="gray" th:attr="n=${mapOfUse['GrayName']}">
<input type="hidden" name="grayV" th:value="${mapOfUse['GrayV']}">
<input type="hidden" name="purple" th:attr="n=${mapOfUse['PurpleName']}">
<input type="hidden" name="purpleV" th:value="${mapOfUse['PurpleV']}">
<input type="hidden" name="otherss" th:attr="v=${mapOfUse['OthersV']}">
</div>
<!-- Chart.js -->
<script src="./vendors/Chart.js/dist/Chart.min.js"></script>
<script>
    Chart.defaults.global.legend = {
        enabled: false
    };
    var BlueName = $("input[name='blue']").attr("n");
    var BlueV = $("input[name='blueV']").val();
    var GreenName = $("input[name='green']").attr("n");
    var GreenV = $("input[name='greenV']").val();
    var GrayName = $("input[name='gray']").attr("n");
    var GrayV = $("input[name='grayV']").val();
    var PurpleName = $("input[name='purple']").attr("n");
    var PurpleV = $("input[name='purpleV']").val();
    var OthersV = $("input[name='otherss']").attr("v");

    var ctx = document.getElementById("pieChart");
    var data = {
        datasets: [{
            data: [OthersV, PurpleV, GrayV, GreenV, BlueV],
            backgroundColor: [
                "#455C73",
                "#9B59B6",
                "#BDC3C7",
                "#26B99A",
                "#3498DB"
            ],
            label: 'My dataset' // for legend
        }],
        labels: [
            "others",
            PurpleName,
            GrayName,
            GreenName,
            BlueName
        ]
    };

    var pieChart = new Chart(ctx, {
        data: data,
        type: 'pie',
        otpions: {
            legend: false
        }
    });
</script>


<!-- Doughnut Chart -->
<script>
    $(document).ready(function () {
        var options = {
            legend: false,
            responsive: false
        };
        var others = $(".Others").text().trim();
        var othersPercent = $(".OthersPercent").attr("v");
        var blueName = $(".blueName").text().trim();
        var bluePercent = $(".bluePercent").attr("v");
        var greenName = $(".greenName").text().trim();
        var greenPercent = $(".greenPercent").attr("v");
        var purpleName = $(".purpleName").text().trim();
        var purplePercent = $(".purplePercent").attr("v");
        var aeroName = $(".aeroName").text().trim();
        var aeroPercent = $(".aeroPercent").attr("v");
        // alert(purplePercent);
        new Chart(document.getElementById("canvas1"), {
            type: 'doughnut',
            tooltipFillColor: "rgba(51, 51, 51, 0.55)",
            data: {
                labels: [
                    aeroName,
                    purpleName,
                    others,
                    greenName,
                    blueName
                ],
                datasets: [{
                    data: [aeroPercent, purplePercent, othersPercent, greenPercent, bluePercent],
                    backgroundColor: [
                        "#BDC3C7",
                        "#9B59B6",
                        "#E74C3C",
                        "#26B99A",
                        "#3498DB"
                    ],
                    hoverBackgroundColor: [
                        "#CFD4D8",
                        "#B370CF",
                        "#E95E4F",
                        "#36CAAB",
                        "#49A9EA"
                    ]
                }]
            },
            options: options
        });
    });
</script>
<!-- /Doughnut Chart -->

</body>
</html>

